!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Owl=t():e.Owl=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(1),a=r(7),s=r(9),c=r(12),u=r(19),f=r(23),g=r(26),l=r(27),p=r(17),h=r(28),d=r(29),v=r(31),y=r(32),m=r(4).version,w=r(11),b=r(3),T=r(16),M=r(34),E=function(){function e(t,r){n(this,e);var i=new o(t);this.errManager=new c(i,this),this.pageManager=new f(i),this.resManager=new u(i,this.errManager),this.metricManager=new g(i),this.logManager=new l(i),this.cfgManager=i,this.init(),r&&r.noFilter||a(this.cfgManager)}return i(e,[{key:"init",value:function(){this.cfgManager.setExtension(y.getExt())}},{key:"config",value:function(e){this.cfgManager.set(e)}},{key:"debug",value:function(){this.cfgManager.set({devMode:!0}),b.setDebug()}},{key:"addError",value:function(e,t){t&&t.combo===!1?this.errManager.report(e,t):this.cfgManager.get("error").combo===!1?this.errManager.report(e,t):this.errManager.push(e,t)}},{key:"sendErrors",value:function(){this.errManager.report()}},{key:"addPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.pageManager.getPerformaceTiming(),r=t.perf,n=void 0;if(void 0!==e.duration)n=e;else if(void 0!==r){var i=e.timeStamp||+new Date;n={position:e.position,duration:i-r.navigationStart}}n&&(this.pageManager.setUserReady(),this.pageManager.push(n),this.pageManager.report())}},{key:"sendPoints",value:function(){this.pageManager.report(!0)}},{key:"addApi",value:function(e){if(e){if(void 0!==e.networkCode&&"number"!=typeof e.networkCode)return b.ignore("网络状态码必须为Number类型",JSON.stringify(e));if(void 0!==e.statusCode&&"number"!=typeof e.statusCode)return b.ignore("业务状态码必须为Number类型",JSON.stringify(e));var t={type:"api",connectType:e.connectType||"",resourceUrl:e.name,statusCode:(e.networkCode||"")+"|"+(e.statusCode||""),responsetime:e.responseTime&&e.responseTime.toString()?e.responseTime.toString():"0"};e.content&&(t.firstCategory=w.AJAX,t.secondCategory=e.secondCategory||e.name,t.logContent=e.content),this.resManager.pushApi(t)}}},{key:"reportApi",value:function(){this.addApi.apply(this,arguments)}},{key:"sendApis",value:function(){this.resManager.report()}},{key:"addLog",value:function(e){this.logManager.addLog(e)}},{key:"createLog",value:function(){var e=this.cfgManager,t=new l(e);return t}},{key:"updateFilter",value:function(e,t){void 0===t?this.cfgManager.removeFilter(e):this.cfgManager.addFilter(e,t)}},{key:"wrap",value:function(e,t,r){if("function"!=typeof e)return e;try{if(e.__owl_wrapped__)return e;if(e.__owl_wrapper__)return e.__owl_wrapper__}catch(t){return e}var n=function(){try{return e.apply(t,arguments)}catch(e){k.addError(e,r)}};for(var i in e)e.prototype.hasOwnProperty(i)&&(n[i]=e[i]);return n.prototype=e.prototype,e.__owl_wrapper__=n,n.__owl_wrapper__=!0,n}},{key:"setDimension",value:function(e){this.cfgManager.setExtension(e)}}]),e}(),k=new E({},{noFilter:!0});k.OWL=E,k.__version__=m,k.errorModel=s,k.MetricManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.cfgManager,t=new g(e);return t},k.start=function(e){var t=T.getUserAgent(),n=!1;if(M.forEach(function(e){t.indexOf(e)!==-1&&(n=!0,b.ignore("当前环境被判断为爬虫，监控功能关闭"))}),!n&&!this.isStarted){if(this.isStarted=!0,k.cfgManager.set({pageUrl:T.getHref()}),e&&(e&&e.resource&&e.resource.sample&&(e.resource.sample=void 0),k.cfgManager.set(e)),this.cfgManager.get("logan").enable){var i=this.cfgManager.get("logan").Logan,o=this.cfgManager.get("project"),s=this.cfgManager.get("pageUrl"),c=this.cfgManager.get("logan").config;p.ready({LoganAPI:i,project:o,pageUrl:s,loganConfig:c})}a(k.cfgManager),v(k.pageManager),h(k.errManager),d(k.resManager,k.errManager);var u=e.preLoadName||"_Owl_";if(window[u]){window[u].isReady=!0;var f=window[u],g=f.config,l=f.preTasks,y=f.dataSet;k.cfgManager.set({autoCatch:g}),l&&l.length&&(l.forEach(function(e){k[e.api].apply(k,e.data)}),window[u].preTasks=[]),setTimeout(function(){y&&y.length&&y.forEach(function(e){e&&"jsError"===e.type?k.errManager.parseWindowError.apply(k.errManager,e.data):"resError"===e.type?k.resManager.handleResourceLoadError.apply(k.resManager,e.data):"resTime"===e.type?k.resManager.handleResourceTiming.apply(k.resManager,e.data):"pageTime"===e.type&&k.pageManager.parsePageTime.apply(k.pageManager,e.data)}),window[u].dataSet=[]},0)}var m=k.cfgManager.get("isSPA")||k.cfgManager.get("onpopstate");if(m){var w=window.onpopstate;window.onpopstate=function(e){k.cfgManager.set({pageUrl:T.getHref()});var t=k.cfgManager.get("onpopstate");try{t(e)}catch(e){b.ignore(e)}w&&w.apply(window,e)}}k.errManager.checkCache();var E=r(35);E("owl_sdk",k)}},e.exports=k},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(2),s=r(3),c=r(4).version,u=r(5),f=r(6),g=["region","operator","network","container","os","unionId"],l=f+"//catfront.dianping.com",p=f+"//catfront.51ping.com",h=function(){function e(t){n(this,e),this.url=l,this.filters=[],this._config={devMode:!1,project:"",pageUrl:"",logan:{enable:!1},disabledFilters:[],noScriptError:!0,ignoreList:{js:["Illegal invocation"],ajax:["https?://report.meituan.com/"],resource:["https?://hls.dianping.com/","https?://frep.meituan.net/"]},resourceReg:/(.51ping|.dianping|.dpfile|.meituan|.sankuai|.kuxun|.maoyan|.neixin)/,disableCache:!1,invalid:{ajax:!0},autoCatch:{page:!0,ajax:!0,js:!0,resource:!0,console:!1},ajax:{invalid:!0,flag:!1,duration:2e3},image:{flag:!1,duration:5e3,fileSize:100,filter:function(){return!1}},resource:{sample:.1,sampleApi:.1,combo:!0,delay:1e3},page:{auto:!0,sample:.5,delay:0,timeThreshold:5,mainResourceNumber:5,sensoryIndex:!0,disableSensoryImageIndex:!1,ignoreIframe:!0},error:{sample:1,delay:1e3,combo:!1,maxSize:10240,maxNum:100,maxTime:6e4},metric:{sample:.5,combo:!0,delay:1500}},this.baseQuery={v:1,sdk:c},this.apiPaths={log:"/api/log",error:"/api/log",page:"/api/speed",resource:"/batch",metric:"/api/metric"},this.extensions={},this.userConfig={},this.config={},t?this.set(t):this.config=this._config}return o(e,[{key:"removeFilter",value:function(e){for(var t=0;t<this.filters.length;t++){var r=this.filters[t];if(r.key===e)return void this.filters.splice(t,1)}}},{key:"addFilter",value:function(e,t){if(e&&t instanceof Function&&this.config.disabledFilters&&this.config.disabledFilters.indexOf(e)===-1){for(var r=-1,n=0;n<this.filters.length;n++){var i=this.filters[n];i.key===e&&(r=n,i.fn=t)}r===-1&&this.filters.push({key:e,fn:t})}}},{key:"get",value:function(e){return e?this.config[e]:this.config}},{key:"set",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){if("devMode"===t&&(this.setApiDomain(e[t]),e[t]&&s.setDebug()),"ext"===t&&this.setExtension(e[t]),"resourceReg"===t)try{this.userConfig[t]=new RegExp(e[t])}catch(e){s.ignore(e)}"object"!==i(e[t])||e[t]instanceof RegExp||e[t]instanceof Array?this.userConfig[t]=e[t]:"pageUrl"!==t&&(this.userConfig[t]=a(this.userConfig[t],e[t]))}this.update()}},{key:"setApiDomain",value:function(e){e?this.url=p:this.url=l}},{key:"getExtension",value:function(e){return e?this.extensions[e]:this.extensions}},{key:"setExtension",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];"latlng"===t?(this.extensions.region=r,this.baseQuery.useLatlng=!0):g.indexOf(t)!==-1&&(this.extensions[t]=r)}}},{key:"getApiPath",value:function(e){var t=this.apiPaths[e];return u.stringify(this.url+t,this.baseQuery)}},{key:"update",value:function(){this.config=this._config;for(var e in this.userConfig){var t=this.userConfig[e];"object"!=("undefined"==typeof t?"undefined":i(t))||t instanceof RegExp||t instanceof Array?this.config[e]=t:this.config[e]=a(this.config[e],this.userConfig[e])}}}]),e}();e.exports=h},function(e,t){"use strict";e.exports=function(e,t){var r={},n=void 0;for(n in e)r[n]=e[n];for(n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&(r[n]=t[n]);return r}},function(e,t){"use strict";e.exports={devMode:!1,setDebug:function(){this.devMode=!0},ignore:function(){window.Owl&&window.Owl.debugLog&&(window.console.log("【OWL日志:】"),window.console.log&&window.console.log.apply(window.console,arguments))},log:function(){this.devMode&&console.log.apply(console,arguments)}}},function(e,t){"use strict";t.version="1.8.0"},function(e,t){"use strict";e.exports={stringify:function(e,t){if(!t)return e;var r=[];for(var n in t)t.hasOwnProperty(n)&&r.push(n+"="+t[n]);return~e.indexOf("?")?e+"&"+r.join("&"):e+"?"+r.join("&")}}},function(e,t){"use strict";var r=window.location.protocol?window.location.protocol:"http:";r=new RegExp("http").test(r)?r:"http:",e.exports=r},function(e,t,r){"use strict";var n=r(8),i=window.navigator.userAgent;e.exports=function(e){e.get("devMode")||(e.addFilter("base",n.base),/MicroMessenger/.test(i)?e.addFilter("weixin",n.weixin):/dp\/com\.dianping/.test(i)&&e.addFilter("dianping",n.dianping))}},function(e,t){"use strict";e.exports={base:function(e){return!e.resourceUrl||/\.(dpfile|dianping|51ping|meituan)\.(com|net)/.test(e.resourceUrl)},weixin:function(e){return!/(WeixinJSBridge|_WXJS|WebViewJavascriptBridge)/.test(e.sec_category)},dianping:function(e){return!/document.elementFromPoint/.test(e.sec_category)}}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2),a=r(10),s=r(11),c=["project","pageUrl","realUrl","resourceUrl","category","sec_category","level","timestamp","content"],u=["rowNum","colNum","tags"].concat(c),f=function(){function e(t){if(n(this,e),t){var r=void 0;for(r in t)t.hasOwnProperty(r)&&(this[r]=t[r]);this.parse(t)}}return i(e,[{key:"parse",value:function(){this.category||(this.category=s.SCRIPT),this.level||(this.level=a.ERROR),this.timestamp||(this.timestamp=+new Date),this.sec_category||(this.sec_category="default")}},{key:"isEqual",value:function(e){return this.sec_category===e.sec_category&&this.resourceUrl===e.resourceUrl&&this.colNum===e.colNum&&this.rowNum===e.rowNum&&this.content===e.content}},{key:"update",value:function(e){for(var t in e)void 0!==e[t]&&u.indexOf(t)!==-1&&(this[t]=e[t]);return this}},{key:"updateTags",value:function(e){var t=o(this.tags||{},e);return this.tags=t,this}},{key:"toJson",value:function(){var e=this,t=this.rowNum,r=this.colNum,n={};return c.map(function(t){void 0!==e[t]&&(n[t]=e[t])}),n.category===s.SCRIPT&&t&&r&&(n.dynamicMetric={rowNum:t,colNum:r}),this.tags&&(n.dynamicMetric=o(n.dynamicMetric||{},this.tags)),n}}]),e}();f.LEVEL=a,f.CATEGORY=s,e.exports=f},function(e,t){"use strict";e.exports={ERROR:"error",INFO:"info",WARN:"warn",DEBUG:"debug"}},function(e,t){"use strict";e.exports={SCRIPT:"jsError",AJAX:"ajaxError",RESOURCE:"resourceError"}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(13),s=r(2),c=r(9),u=r(14),f=r(11),g=r(3),l=r(16),p=r(5),h=r(17),d=function(e){return e&&e.stack||""},v="error",y=function(e){return"c="+encodeURIComponent(JSON.stringify(e))},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e&&e.data)return e.beforeSend&&e.beforeSend(),a({type:"POST",url:e.url,header:{"Content-Type":"application/x-www-form-urlencoded"},data:y(e.data),success:e.success,fail:e.fail})},w=function(){function e(t,r){n(this,e),this.parent=r,this.cfgManager=t,this.cache=[],this.cacheSending={},this.comboTimeout=0,this.timeLimit=Date.now(),this.errorCount=0,this.isTimeLimit=!1,this.detectLeave()}return o(e,[{key:"_handleError",value:function(e){try{var t=this.cfgManager.get("onErrorPush");if(t instanceof Function&&(e=t(e)),e instanceof c||void 0===e)return e;g.ignore("onErrorPush方法返回结果有误")}catch(t){return g.ignore("onErrorPush方法处理有误",t),e}}},{key:"parseWindowError",value:function(e,t,r,n,i){try{i&&i.stack?this.push(i):"string"==typeof e&&this._push({category:f.SCRIPT,sec_category:e,resourceUrl:t,rowNum:r,colNum:n})}catch(e){this.reportSystemError(e)}}},{key:"parsePromiseUnhandled",value:function(e){if(e)try{var t=e.reason;if(t){if(t instanceof Error&&(t=t.toString()),this.cfgManager&&"test"===this.cfgManager.__env__)return t;this._push({category:f.SCRIPT,sec_category:"unhandledrejection",content:t})}}catch(e){g.ignore(e)}}},{key:"parseConsoleError",value:function(){try{var e=[].slice.call(arguments);if(!e||!e.length)return;for(var t=[],r=0;r<e.length;r++){var n=e[r];"string"!=typeof e[r]&&(n=e[r]instanceof window.Error?JSON.stringify(e[r].stack):JSON.stringify(e[r])),t.push(n)}t&&t.length&&this._push({category:f.SCRIPT,sec_category:"consoleError",content:t.join(" ")})}catch(e){this.reportSystemError(e)}}},{key:"detectLeave",value:function(){var e=this,t=arguments;try{var r=window.onbeforeunload;window.onbeforeunload=function(){var n=e.addCacheExtension(),i=e.cacheSending,o=void 0;if(Object.keys(i))for(var a in i)if(i.hasOwnProperty(a)&&void 0!==i[a]){var s=i[a],c=s.xhr,f=s.cache;try{c.abort()}catch(e){g.ignore(e)}o=n.concat(f)}if(o&&o.length)if(window.navigator.sendBeacon&&e.cfgManager.get("useSendBeacon")){var l=e.cfgManager.getApiPath(v),h=p.stringify(l,{beacon:1});window.navigator.sendBeacon(h,y(o))}else e.cfgManager.get("disableCache")||u.add(o);r&&r.apply(e,t)}}catch(e){g.ignore(e)}}},{key:"checkCache",value:function(){var e=this,t=u.get();t&&t.length&&setTimeout(function(){m({url:e.cfgManager.getApiPath(v),data:t,success:function(){u.clear()}})},1500)}},{key:"reportSystemError",value:function(e){e&&e.stack&&(this.cache.push(new c({project:"owl",pageUrl:"default",realUrl:l.getHref(),sec_category:e.msg||e.name||"parseError",content:JSON.stringify(e.stack)})),this.send(!0))}},{key:"_processError",value:function(e){var t=function(e){var t="object"===("undefined"==typeof e?"undefined":i(e))?JSON.stringify(e):e;return{category:f.SCRIPT,sec_category:"Invalid_Error",content:t}},r=function(e){var r=e.line,n=e.column,i=e.message||e.name||"";if(e.stack){var o=e.stack.match("https?://[^\n]+");o=o?o[0]:"";var a=/https?:\/\/(\S)*\.js/,s="";a.test(o)&&(s=o.match(a)[0]);var c=o.match(":(\\d+):(\\d+)");c||(c=[0,0,0]);var u=d(e);return{category:f.SCRIPT,sec_category:i,content:u,rowNum:void 0!==r?r:c[1],colNum:void 0!==n?n:c[2],resourceUrl:s}}return t(e)};try{return r(e)}catch(r){return this.reportSystemError(e),t(e)}}},{key:"_push",value:function(e,t){e=this.parse(e),this.push(new c(e),t)}},{key:"_pushResource",value:function(){var e=this.cfgManager.get("resource").sample;Math.random()>e||this._push.apply(this,arguments)}},{key:"parse",value:function(e){return e.project||(e.project=this.cfgManager.get("project")),e.pageUrl||(e.pageUrl=this.cfgManager.get("pageUrl")||"default"),e.realUrl=l.getHref(),e}},{key:"push",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.cfgManager;if(e&&!(Math.random()>r.get(v).sample)){if(e instanceof c||(e instanceof Error?e=this._processError(e):"string"==typeof e?e={sec_category:e}:"object"===("undefined"==typeof e?"undefined":i(e))&&(e={sec_category:e.name,content:e.msg}),e=this.parse(e),e=new c(e)),e&&e.content&&e.content.length>=r.get(v).maxSize)return void h.log("[Error]: 错误长度大于"+r.get(v).maxSize);e.update(t),h.log("[Error]: 错误类别->"+e.sec_category+" 错误堆栈->"+e.content);var n=r.filters,o=!0;if(this.cfgManager.get("noScriptError")&&0===e.sec_category.indexOf("Script error"))return o=!1;if(n&&n.length)for(var a=0;a<n.length;a++){var s=n[a];if(!s.fn(e))return o=!1}var u=r.get("ignoreList").js;if(u&&u.length)for(var f=0;f<u.length;f++){var g=u[f];if(0===e.sec_category.indexOf(g)){o=!1;break}}o&&(this.isExist(e)||(this.onPush&&this.onPush(e),e=this._handleError(e),e&&(this.cache.push(e),this.send())))}}},{key:"isExist",value:function(e){for(var t=0;t<this.cache.length;t++){var r=this.cache[t];if(r instanceof c||(r=new c(r)),r.isEqual(e))return!0}return!1}},{key:"report",value:function(){this.push.apply(this,arguments),this.send(!0)}},{key:"send",value:function(e){var t=this,r=this.cfgManager,n=this.comboTimeout,i=r.get("error").maxNum||100,o=r.get("error").maxTime||6e4,a=Date.now()-this.timeLimit;this.isTimeLimit||(this.timeLimit=Date.now()),this.isTimeLimit=!0;var s=function(){if(t.cache.length){clearTimeout(n),n=0,t.onSubmit&&t.onSubmit(t.cache);var e=t.addCacheExtension(),r=+new Date;try{if(t.errorCount=t.errorCount+t.cache.length,a<=o){if(t.errorCount>=i)return}else t.isTimeLimit=!1,t.errorCount=0}catch(e){g.ignore(e)}var s=m({url:t.cfgManager.getApiPath(v),data:e,success:function(){t.nextCache=[],t.cacheSending[r]=void 0},fail:function(){t.cfgManager.get("disableCache")||u.add(t.nextCache)}});t.cacheSending[r]={xhr:s,cache:e},t.nextCache=e,t.cache=[]}},c=r.get(v).delay;e?s():n||c===-1||(n=setTimeout(s,c))}},{key:"addCacheExtension",value:function(){var e=this.cfgManager,t=this.cache,r=[],n=e.getExtension();if(!t||!t.length)return r;for(var o=0;o<t.length;o++){var a=t[o];n&&"object"===("undefined"==typeof n?"undefined":i(n))&&(a=s(a.toJson(),n)),r.push(a)}return r}}]),e}();e.exports=w},function(e,t){"use strict";var r=function(){};e.exports=function(e){if(e){var t=window.navigator.userAgent,n=window.navigator.appName,i=n.indexOf("Microsoft Internet Explorer")!==-1&&(t.indexOf("MSIE 8.0")!==-1||t.indexOf("MSIE 9.0")!==-1),o=i&&window.XDomainRequest,a=void 0;if(a=o?new XDomainRequest:new XMLHttpRequest,a.open(e.type||"GET",e.url,!0),a.success=e.success||r,a.fail=e.fail||r,"POST"===e.type){if(e.header&&!o)for(var s in e.header)e.header.hasOwnProperty(s)&&a.setRequestHeader(s,e.header[s]);a.send(e.data)}else a.send();return a}}},function(e,t,r){"use strict";var n="owl_cache",i=r(15),o=r(3);e.exports={isSupport:i(),get:function(){if(this.isSupport){var e=[];try{var t=localStorage.getItem(n);t&&(e=JSON.parse(t))}catch(e){o.ignore(e)}return e}},add:function(e){if(this.isSupport&&e instanceof Array){var t=this.get();e=e.concat(t);try{localStorage.setItem(n,JSON.stringify(e))}catch(e){o.ignore(e)}}},clear:function(){if(this.isSupport)try{localStorage.removeItem(n)}catch(e){o.ignore(e)}}}},function(e,t){"use strict";e.exports=function(){var e="local_test";try{localStorage.setItem(e,1),localStorage.removeItem(e)}catch(e){return!1}return!0}},function(e,t){"use strict";var r={getInstance:function(){return window},getConstructor:function(){return Window},getOrigin:function(){var e=window.location.origin;return e||(e=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),e},getProtocol:function(){var e=window.location.protocol;return e},getHref:function(){var e=window.location.href;return e},getUserAgent:function(){return window.navigator.userAgent}};e.exports=r},function(e,t,r){"use strict";var n=r(18).loadScript,i=void 0,o=!1;e.exports={queue:[],ready:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.LoganAPI,a=t.pageUrl,s=t.project,c=t.loganConfig;o=!0;var u=function(){for(c&&(i=i.config(c)),i.log("[新项目]: 项目-> "+s+" 对应的页面-> "+a+" ");e.queue.length;){var t=e.queue.shift();i.log(t)}};if(r)i=r,u();else try{window&&window.Logan?(i=window.Logan,u()):n("//www.dpfile.com/app/dp-logan-web/logan_1.11.0.js",function(){i=window.Logan,u()})}catch(e){console.log("logan 加载失败")}},log:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o){var r="owl";t.noType&&(r="owl"),i?i.log(e,r):this.queue.push(e)}}}},function(e,t){"use strict";var r=[];t.loadScript=function(e,t){if(~r.indexOf(e))return void t();var n=document.createElement("script");n.src=e,n.onload=function(){r.push(e),t()},document.getElementsByTagName("head")[0].appendChild(n)}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(13),a=r(20),s=r(11),c=r(21),u=r(3),f=r(16),g=r(17),l=r(6),p=r(22),h="resource",d=10,v=window.performance&&void 0!==window.performance.getEntries,y=function(e){var t=e.split("//");if(t&&t.length>1)return t[0]+"//"+t[1].split("/")[0]+"/images"},m=function(){function e(t,r){n(this,e),this.cfgManager=t,this.errManager=r,this.cache=[],this.entryCache=[],this.comboTimeout=0}return i(e,[{key:"parseAjax",value:function(e){var t=void 0,r=void 0,n=void 0,i=void 0,o=void 0,a=void 0;try{t=e.type,r=e.currentTarget.responseURL||e.currentTarget.url,n=e.duration,i=e.total,o=e.currentTarget.status,a=this.getConnectType()}catch(e){return e}if(void 0!==n&&!isNaN(n)){var c="load"===t||"readystatechange"===t&&200===o;g.log("[加载资源]: [类型]->AJAX [链接]->"+r),0===r.indexOf("//")?r=f.getProtocol()+r:0===r.indexOf("/")&&(r=f.getOrigin()+r),o=(c?200:500)+"|";var l=this.cfgManager,p=!0;try{var h=l.get("ignoreList").ajax;if(h)for(var d=0;d<h.length;d++){var v=h[d],y=new RegExp(v);if(y.test(r))return void(p=!1)}}catch(e){u.ignore(e)}if(p){var m=l.get("resourceReg"),w=l.get("devMode")||m instanceof RegExp&&l.get("resourceReg").test(r);w?!l.get("ajax").flag||n<l.get("ajax").duration?this.pushApi({type:"ajax",connectType:a,resourceUrl:r,responsetime:n&&n.toString()?n.toString():"0",responsebyte:i&&i.toString()?i.toString():"0",statusCode:o,firstCategory:c?"":s.AJAX}):(this.errManager.push({name:"TIMEOUT_AJAX",msg:"ajax请求时间超过设定"+r},{category:s.AJAX}),g.log("[加载资源请求超时]: [类型]->AJAX [链接]->"+r)):l.get("invalid").ajax&&l.get("ajax").invalid&&Math.random()<l.get("resource").sample&&(this.errManager.push({name:"INVALID_AJAX",msg:r},{category:s.AJAX}),g.log("[资源请求域名非法]: [类型]->AJAX [链接]->"+r))}}}},{key:"parseType",value:function(e){if(!e)return"";switch(e){case"script":return"js";case"link":return"css";case"img":return"image";default:return e}}},{key:"filterResource",value:function(e){var t=!0,r=this.cfgManager.get("ignoreList").resource;try{for(var n=0;n<r.length;n++){var i=r[n],o=new RegExp(i);if(o.test(e)){t=!1;break}}return t}catch(e){return u.ignore(e),t}}},{key:"doHandlePerformanceEntry",value:function(e){if(e=this.filterEntry(e),e&&e.length){for(var t=this.cfgManager,r=this.entryCache,n=0;n<e.length;n++){var i=e[n],o=i.name,a=this.filterResource(o);if(!a)return;if(t.get("devMode")||t.get("resourceReg").test(o)){r.push(o);var c="200|",u=t.get("image"),f=!1;if(("img"===i.initiatorType||"css"===i.initiatorType)&&u.flag){var g=i.name,l=u.filter;if("function"==typeof l&&!l(g)){var p=i.transferSize,h=i.duration,d=void 0;p&&p>1e3*u.fileSize?d="IMAGE_SIZE_EXCEED":h&&h>u.duration&&(d="IMAGE_DURATION_EXCEED"),d&&(this.errManager._pushResource({content:g,sec_category:d},{category:s.RESOURCE}),f=!0)}}f||this.push({type:this.parseType(i.initiatorType),resourceUrl:"img"===i.initiatorType?y(o):o,responsebyte:i.transferSize&&i.transferSize.toString()?i.transferSize.toString():"0",responsetime:i.duration&&i.duration.toString()?i.duration.toString():"0",statusCode:c})}}this.report()}}},{key:"filterEntry",value:function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];["link","script","img","css"].indexOf(n.initiatorType)!==-1&&t.push(n)}return t}},{key:"observePerformanceChange",value:function(){var e=this;if(!this.observePerformance){this.observePerformance=!0;var t=this.cfgManager.get(h).disablePerformanceObserver||!1;if(p.PerformanceObserver()&&t!==!0){var r=new window.PerformanceObserver(function(t){try{var r=t.getEntries();e.doHandlePerformanceEntry(r)}catch(e){u.ignore(e)}});r.observe({entryTypes:["resource"]})}else c.on("ajaxCall",function(){setTimeout(function(){var t=e.entryCache,r=window.performance.getEntries();if(r.length!==t.length&&r.length>t.length){for(var n=[],i=0;i<r.length;i++)t.indexOf(r[i].name)===-1&&n.push(r[i]);t=r,e.doHandlePerformanceEntry(n)}},1500)})}}},{key:"handleResourceTiming",value:function(){try{if(v){var e=window.performance.getEntries();this.doHandlePerformanceEntry(e),this.observePerformanceChange()}}catch(e){this.errManager.reportSystemError(e)}}},{key:"handleResourceLoadError",value:function(e){var t=this,r=e.target||e.srcElement,n=function(){var e=r.src||r.href,n=r.nodeName;n&&(n=n.toLowerCase());var i=f.getHref();if(i&&0!==i.indexOf(e)){var o=e;if("img"===n&&(o=y(e)),o){var a=t.filterResource(o);a&&(t.addLogan(n,e),v?t.pushApi({type:t.parseType(n),resourceUrl:o,responsetime:"0",responsebyte:"0",statusCode:"500|",firstCategory:s.RESOURCE,secondCategory:n,logContent:e}):t.errManager._pushResource({category:s.RESOURCE,sec_category:n,content:e}))}}};try{var i=r instanceof HTMLScriptElement||r instanceof HTMLLinkElement||r instanceof HTMLImageElement;if(!i)return;n()}catch(e){this.errManager.reportSystemError(e)}}},{key:"addLogan",value:function(e,t){g.log("[加载资源出错]: [类型]->"+e+" [链接]->"+t)}},{key:"_stringify",value:function(){var e=this.cache;if(e&&e.length){for(var t={},r=this.cfgManager.getExtension(),n={},i=[],o=["region","operator","network","container","os"],a=0;a<o.length;a++)n[o[a]]="";for(var s=0;s<e.length;s++){var c=e[s];i.push(c)}for(var u in n)n.hasOwnProperty(u)&&(n[u]=r[u]||"");return n.infos=i,t=n}}},{key:"doBatchPush",value:function(e){e=this.parse(e);var t=new a(e);this.onPush&&this.onPush(t);var r=!0,n=this.cfgManager;if("function"==typeof n.get("onBatchPush")){var i=n.get("onBatchPush");try{r=i(t)}catch(e){u.ignore(e)}}r&&this.cache.push(t)}},{key:"push",value:function(e){var t=this.cfgManager;Math.random()>t.get(h).sample||(this.doBatchPush(e),this.cache.length>=d?this.report(!0):this.triggerReport())}},{key:"parse",value:function(e){return e.pageUrl||(e.pageUrl=this.cfgManager.get("pageUrl")),e.project||(e.project=this.cfgManager.get("project")),e}},{key:"pushApi",value:function(e){var t=this.cfgManager;Math.random()>t.get(h).sampleApi||(this.doBatchPush(e),this.triggerReport())}},{key:"report",value:function(){this.triggerReport(!0)}},{key:"triggerReport",value:function(e){var t=this,r=this.cfgManager;if(this.cache.length){var n=function(){clearTimeout(t.comboTimeout),t.comboTimeout=0,t.onSubmit&&t.onSubmit(t.cache),t.send()},i=r.get(h).delay;e?this.send():this.comboTimeout||i===-1||(this.comboTimeout=setTimeout(n,i))}}},{key:"send",value:function(){this.onSubmit&&this.onSubmit(this.cache);var e=this._stringify();if(e){var t=this.cfgManager.getApiPath(h);o({type:"POST",url:t,data:JSON.stringify(e)}),this.cache=[]}}},{key:"getConnectType",value:function(){return l.indexOf("https")!==-1?"https":"http"}}]),e}();e.exports=m},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=["resourceUrl","connectType","type","timestamp","requestbyte","responsebyte","responsetime","project","pageUrl","statusCode","firstCategory","secondCategory","logContent"],o=["resourceUrl","connectType","type","timestamp","requestbyte","responsebyte","responsetime","project","pageUrl","statusCode","firstCategory","secondCategory","logContent"],a=function(){function e(t){var n=this;r(this,e),i.forEach(function(e){n[e]=t[e]}),this.parse()}return n(e,[{key:"update",value:function(e){for(var t in e)e.hasOwnProperty(t)&&i.indexOf(t)!==-1&&(this[t]=e[t])}},{key:"parse",value:function(){if(!this.timestamp){var e=Date.now();this.timestamp=e.toString()}this.requestbyte||(this.requestbyte="0"),this.responsebyte||(this.responsebyte="0")}},{key:"stringify",value:function(){var e=this,t=o.map(function(t){return e[t]});return t.join("\t")}}]),e}();e.exports=a},function(e,t){"use strict";e.exports={on:function(e,t){if(e){this._events_||(this._events_={});var r=this._events_;r[e]||(r[e]=[]),r[e].push(t)}},trigger:function(e){var t=this._events_;if(e&&t&&t[e])for(var r=t[e],n=r.length,i=Array.prototype.slice.call(arguments,1),o=0;o<n;o++)r[o].apply(this,i)}}},function(e,t){"use strict";e.exports={PerformanceObserver:function(){if(window.PerformanceObserver)try{var e=/Chrome\/(\d+)/,t=window.navigator.userAgent;if(!e.test(t))return!0;var r=t.match(e)[1];if(parseInt(r)>59)return!0}catch(e){}},MutationObserver:function(){if(window.MutationObserver)try{var e=-1,t=window.navigator.userAgent;if(t.indexOf("compatible")>-1&&t.indexOf("MSIE")>-1?(new RegExp("MSIE (\\d+\\.\\d+);").test(t),e=parseFloat(RegExp.$1)):t.indexOf("Trident")>-1&&t.indexOf("rv:11.0")>-1&&(e=11),e===-1||e>11)return!0}catch(e){}},PeformanceNow:function(){if(window.performance&&window.performance.now)return!0}}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(13),a=r(5),s=r(2),c=r(4).version,u=r(3),f=r(24),g="page",l=function(){function e(t){n(this,e),this.noCache=!1,this.points=[],this.pointsCustom=[],this.cfgManager=t}return i(e,[{key:"setUserReady",value:function(){this.cfgManager.set({page:{auto:!0}})}},{key:"getUserReady",value:function(){return this.cfgManager.get(g).auto}},{key:"setReady",value:function(){this.isReady=!0}},{key:"getReady",value:function(){return this.isReady}},{key:"getPerformaceTiming",value:function(){return{perf:window.performance&&window.performance.timing,paint:window.performance&&window.performance.getEntriesByType&&window.performance.getEntriesByType("paint")}}},{key:"getMainResourceTiming",value:function(){var e=window.performance&&window.performance.getEntriesByType&&window.performance.getEntriesByType("resource"),t=this.cfgManager.get("page").isMainResource,r=[];try{if(!e)return;if("function"==typeof t){for(var n=0;n<e.length;n++){var i=e[n];t(i)&&r.push(i)}return r}for(var o=0;o<e.length;o++){var a=e[o];"link"!==a.initiatorType&&"script"!==a.initiatorType||r.push(a)}var s=this.cfgManager.get("page").mainResourceNumber;return r.length<=s?r:r.splice(0,s)}catch(e){u.ignore(e)}}},{key:"sensoryObserver",value:function(){this.firstScreenManager=new f(this.cfgManager),this.firstScreenManager.mutaObserver()}},{key:"parsePageTimeWithDefer",value:function(){var e=this;setTimeout(function(){try{
var t=e.cfgManager.get("page");t&&t.sensoryIndex?e.firstScreenManager.getSensoryIndex(function(t){e.parsePageTime(t)}):e.parsePageTime()}catch(t){e.parsePageTime()}},0)}},{key:"parsePageTime",value:function(e){var t=this.getPerformaceTiming(),r=t.perf,n=t.paint;if(!r)return this.setReady();var i=r.navigationStart,o={unloadEventStart:1,unloadEventEnd:2,redirectStart:3,redirectEnd:4,fetchStart:5,domainLookupStart:6,domainLookupEnd:7,connectStart:8,connectEnd:9,requestStart:10,responseStart:11,responseEnd:12,domLoading:13,domInteractive:14,domContentLoadedEventStart:15,domContentLoadedEventEnd:16,domComplete:17,loadEventStart:18,loadEventEnd:19},a=void 0;for(a in r)0===r[a]?this.points[o[a]]=r[a]:this.points[o[a]]=r[a]-i;if(this.points[20]=r.domainLookupEnd-r.domainLookupStart,this.points[21]=r.connectEnd-r.connectStart,this.points[22]=r.responseEnd-r.requestStart,n&&n.length)try{for(var s=Number.parseInt||window.parseInt,c=void 0,f=void 0,g=0;g<n.length;g++){var l=n[g];"first-paint"===l.name?c=s(l.startTime):"first-contentful-paint"===l.name&&(f=s(l.startTime))}c&&f&&(this.points[23]=c,this.points[24]=f,e&&(e.FST&&e.FST>f?this.points[25]=e.FST:this.points[25]=f,this.points[26]=e.FCP||f))}catch(e){u.ignore(e)}else e&&(this.points[25]=e.FST||0,this.points[26]=e.FCP||this.points[15]);for(var p=0;p<this.points.length;p++)isNaN(this.points[p])&&(this.points[p]=0);var h=this.getMainResourceTiming();if(h){for(var d=this.noCache,v=0;v<h.length;v++){var y=h[v];if(void 0!==y.transferSize)0!==y.transferSize&&(d=!0);else if(void 0!==y.duration){var m=this.cfgManager.get("page").timeThreshold;y.duration>m&&(d=!0)}}this.noCache=d}this.setReady(),this.report()}},{key:"push",value:function(e){this.onPush&&this.onPush(e),e&&"number"==typeof e.position&&(e.position<0||e.position>31||(this.pointsCustom[e.position]=e.duration,this.report()))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){clearTimeout(this.timeout),this.timeout=void 0})},{key:"report",value:function(e){var t=this,r=this.cfgManager;if(this.getReady()&&this.getUserReady()&&(this.points.length||this.pointsCustom.length)&&!(Math.random()>r.get(g).sample)){this.onSubmit&&this.onSubmit(this.points,this.pointsCustom);try{this.timeout?this.clearTimeout():this.pendingAjax&&this.pendingAjax.abort&&this.pendingAjax.abort()}catch(e){u.ignore(e)}var n=function(){if(t.clearTimeout(),t.points.length||t.pointsCustom.length){var e=r.getApiPath(g),n=a.stringify(e),i=r.getExtension(),u=s({project:r.get("project"),pageurl:encodeURIComponent(r.get("pageUrl")),speed:encodeURIComponent(t.points.join("|")),customspeed:encodeURIComponent(t.pointsCustom.join("|")),timestamp:+new Date,sdk:c,noCache:t.noCache?"true":"false"},i);delete u.unionId,n=a.stringify(n,u),t.pendingAjax=o({method:"GET",url:n,success:function(){t.points=[],t.pointsCustom=[],t.pendingAjax=void 0}})}},i=r.get(g).delay||0;e?n():i>=0&&(this.timeout=setTimeout(function(){n()},i))}}}]),e}();e.exports=l},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){_||(window.performance&&window.performance.getEntriesByType&&window.performance.getEntriesByType("paint")&&document&&document.body&&""!=document.body.innerText?(E=0,_=!0):(e&&3===e.nodeType||e&&""!==e.innerText||document.querySelector&&document.querySelector("img"))&&(o("FCP",t),_=!0))}function o(e,t){M&&(M[e]=t)}function a(){if(!P){for(var e=Object.keys(M),t=0,r=e.length;t<r;t++){var n=e[t];if("FCP"===n){var i=Number.parseInt||window.parseInt;E=i(M[n]||0)}else k[n]&&(k[n].startTime=M[n])}M=null,s()}}function s(){for(var e=[],t=Object.keys(k),r=0,n=t.length;r<n;r++){var i=t[r],o=k[i],a=k[i].nodes;if(a&&a.length){for(var s=[],c=0,g=a.length;c<g;c++){var l=a[c];(!l.style||"hidden"!==l.style.visibility&&"none"!==l.style.display)&&l.offsetTop<=y&&l.offsetLeft<=m&&s.push(l)}s.length&&(h.log("Mutation监听变更Node节点",s,o.startTime),e.push({score:f(s),startTime:o.startTime}))}}k={};var p=u(e);h.log("首屏DOM时间",p),j={FST:p,FCP:E},P=!0}function c(e,t){var r=p.getImageTimingsInFirstScreen(e,t);if(j&&r.length){var n=Math.round(r[0]);h.log("首屏图片时间",n),j.FST=Math.max(j.FST,n),h.log("最终首屏时间",j.FST)}}function u(e){var t=Object.keys(e).length,r=0;if(1===t)r=e[0].startTime;else if(t>1){var n=void 0;n=e.reduce(function(e,t){if(!e.length)return e.push(t),e;var r=e.length-1,n=e[r],i=t.startTime-n.startTime;return w<2&&i<1||2===w&&i<2?e[r]={score:t.score+n.score,startTime:t.startTime}:e.push(t),e},[]).reduce(function(e,t){return e?e.score<t.score||t.score>=3?t:e:t}),r=n.startTime}return parseInt(r)}function f(e){var t=0;if(e&&e.length){t+=e.length*b;for(var r=0,n=e.length;r<n;r++)t+=g(e[r],0)}return t}function g(e,t){if(3===e.nodeType)return t;if(e.style&&("hidden"===e.style.visibility||"none"===e.style.display))return 0;if(!e.clientWidth||!e.clientHeight)return 0;if(e.childNodes.length){var r=Array.prototype.slice.call(e.childNodes,0),n=r.reduce(function(e,r){var n=g(r,t);return e+n},0);return n}return t+T}var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),p=r(25),h=r(3),d=r(22),v=3e3,y=window.outerHeight||screen.height,m=window.outerWidth||screen.width,w=1,b=1,T=1,M={},E=0,k={},S=0,x=0,C=!1,O=void 0,_=void 0,P=!1,R=!1,j=void 0,A=void 0,I=void 0,L=["HTML","HEAD","SCRIPT","STYLE"],N=function(){function e(t){n(this,e),this.cfgManager=t,this.pageData=[],this.observer=null,this.disableMutaObserver=null,this.perObserver=null,this.ignoreDom="owl-ignore",this.ignoreIframe=t.get("page").ignoreIframe||!0,this.pattern=/(\.)(png|jpg|jpeg|gif|webp|ico|bmp|tiff|svg)/i,window._Owl_&&(this.pageData=window._Owl_.pageData,this.observer=window._Owl_.observer,this.disableMutaObserver=window._Owl_.disableMutaObserver),!this.disableMutaObserver&&document.body||(P=!0,R=!0)}return l(e,[{key:"mutaObserver",value:function(){var e=this;if(d.PeformanceNow()&&d.MutationObserver()){if(!P){if(this.observer)try{this.observer.disconnect(),this.observer=null,this.pageData&&this.pageData.length&&this.pageData.forEach(function(t){e.mutaCallback(t.mutations,t.startTime)})}catch(e){console.log("observer disconnect err")}this.observer=new MutationObserver(function(t){e.mutaCallback(t,performance.now())}),this.observer.observe(document,{childList:!0,subtree:!0}),I=setTimeout(function(){a()},v)}if(A=this.cfgManager.get("page").disableSensoryImageIndex)return void(R=!0);this.registerPerformanceObserver()}}},{key:"registerPerformanceObserver",value:function(){var e=this,t=this.cfgManager.get("resource").disablePerformanceObserver||!1;if(d.PerformanceObserver()&&t!==!0){var r=setTimeout(function(){e.performanceObserverStop()},8e3);this.perObserver=new window.PerformanceObserver(function(){clearTimeout(O),O=setTimeout(function(){clearTimeout(r),e.performanceObserverStop()},v)}),this.perObserver.observe({entryTypes:["resource"]})}else R=!0}},{key:"getSensoryIndex",value:function(e){var t=this,r=0,n=setTimeout(function(){clearInterval(r),t.mutaObserverStop(),t.performanceObserverStop(),e(j)},8e3),i=function(){P&&R&&(clearInterval(r),j?(A||c(t.ignoreDom,t.pattern),clearTimeout(n),e(j)):(clearTimeout(n),e()))};r=setInterval(i,500)}},{key:"mutaCallback",value:function(e,t){var r=this;I&&clearTimeout(I),C&&clearTimeout(C),C=setTimeout(function(){r.mutaObserverStop()},v),setTimeout(function(){for(var n=e.length,a=0;a<n;a++){var s=e[a],c=s.target,u=c.nodeName&&c.nodeName.toUpperCase();if(u&&L.indexOf(u)===-1&&"childList"===s.type){var f=s.addedNodes;if(f&&f.length){var g=f[0];try{var l=g.nodeName.toUpperCase();if(L.indexOf(l)!==-1||1!==g.nodeType)continue}catch(e){}try{if(r.ignoreDom&&g&&g.getAttribute&&g.hasAttribute(""+r.ignoreDom))continue}catch(e){}i(g,t||performance.now()),S++,o(S,t||performance.now()),k[S]={nodes:f},g.offsetTop>y&&(x++,x>15&&r.mutaObserverStop());for(var p=0,h=f.length;p<h;p++){var d=f[p];d&&1===d.nodeType&&document.querySelectorAll&&r.addEventMutation(d)}}}}},0)}},{key:"mutaObserverStop",value:function(){this.observer&&this.observer.disconnect&&(this.observer.disconnect(),this.observer=null,a())}},{key:"performanceObserverStop",value:function(){this.perObserver&&this.perObserver.disconnect&&(this.perObserver.disconnect(),this.perObserver=null),R=!0}},{key:"addEventMutation",value:function(e){for(var t=this,r=e.querySelectorAll("[interactive]"),n=0,i=r.length;n<i;n++){var o=r[n],a=o.getAttribute("interactive")||"click";o.addEventListener(a,function(){t.mutaObserverStop()})}}}]),e}();e.exports=N},function(e,t,r){"use strict";function n(e){return e&&"data:image"===e.slice(0,10)}function i(e){var t=document.createElement("a");return t.href=e,t.href}function o(e,t){var r=void 0,i=e.match(/url\(.*?\)/g);if(i&&i.length){var o=i[i.length-1],a=o.replace(/^url\([\'\"]?/,"").replace(/[\'\"]?\)$/,"");t.test(a)&&!n(a)&&(r=a)}return r}function a(e,t){if("IMG"===e.nodeName.toUpperCase())return e.getAttribute("data-srcset")||e.getAttribute("src");var r=window.getComputedStyle(e),n=r.getPropertyValue("background-image")||r.getPropertyValue("background");return o(n,t)}function s(e,t){var r=[];try{for(var o=document.createNodeIterator(document.body,NodeFilter.SHOW_ELEMENT,function(t){if(t&&t.getAttribute&&!t.hasAttribute(""+e))return NodeFilter.FILTER_ACCEPT},!1),s=o.nextNode();s;){var u=a(s,t);u?(c(s)&&!n(u)&&r.push(i(u)),s=o.nextNode()):s=o.nextNode()}}catch(e){console.log("getDomImgs err")}return r}function c(e){if(!e)return!1;var t=e.getBoundingClientRect(),r=t.top,n=t.left,i=t.right,o=t.bottom;return!(!r&&!o)&&e.scrollTop+r<window.innerHeight&&i>0&&n<window.innerWidth}function u(e,t){if(!window.performance||!window.performance.getEntriesByType)return[];var r=[];try{var n=window.performance.getEntriesByType("resource").filter(function(e){return"img"===e.initiatorType||"css"===e.initiatorType}).map(function(e){return{name:e.name.split(":")[1]||e.name,responseEnd:e.responseEnd,connectEnd:e.connectEnd,duration:e.duration}}),i=s(e,t).join("###");return r=n.filter(function(e){return i.indexOf(e.name)!==-1}).map(function(e){var t=e.responseEnd||e.connectEnd+e.duration;return{name:e.name,time:t}}).sort(function(e,t){return t.time-e.time}),f.log("首屏内图片的加载时间",r),r.map(function(e){return e.time})}catch(e){r=[]}return r}var f=r(3);e.exports={getImageTimingsInFirstScreen:u,isInFirstScreen:c}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2),a=r(13),s=r(3),c=r(5),u="metric",f=function(){function e(t){n(this,e),this.cfgManager=t,this.tags={},this.kvs={},this.random=Math.random()}return i(e,[{key:"setTags",value:function(e){this.tags=o(this.tags,e)}},{key:"getTags",value:function(e){return e?this.tags[e]:this.tags}},{key:"setMetric",value:function(e,t){var r=this;if("string"!=typeof e)return s.ignore("metric名称必须是string类型");if("number"!=typeof t)return s.ignore("metric值必须是number类型,当前为"+e+"-"+t);this.kvs[e]||(this.kvs[e]=[]),this.kvs[e].push(t);try{this.cfgManager.get(u).combo&&(this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.timeout=setTimeout(function(){r.report()},this.cfgManager.get(u).delay||1500))}catch(e){throw e}}},{key:"getMetric",value:function(e){return e?this.kvs[e]:this.kvs}},{key:"clearMetric",value:function(){this.kvs={}}},{key:"_rollbackMetric",value:function(e){for(var t in e)e.hasOwnProperty(t)&&(this.kvs[t]=e[t].concat(this.kvs[t]||[]))}},{key:"report",value:function(){var e=this;if(!(this.random>this.cfgManager.get(u).sample)){var t=this.cfgManager,r=t.get("project");if(this.kvs&&0!==Object.keys(this.kvs).length){var n={kvs:this.kvs,tags:this.tags,ts:parseInt(+new Date/1e3)},i=this.kvs;this.clearMetric();var o=t.getApiPath(u),s=c.stringify(o,{p:r});a({type:"POST",url:s,header:{"Content-Type":"application/x-www-form-urlencoded"},data:"data="+encodeURIComponent(JSON.stringify(n)),fail:function(){e._rollbackMetric(i)}})}}}}]),e}();e.exports=f},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(17),a=function(){function e(t){n(this,e),this.cfgManager=t}return i(e,[{key:"addLog",value:function(e){if("string"!=typeof e)throw"addLog只接受string类型的日志";o.log("[Log]: "+e,{noType:!0})}}]),e}();e.exports=a},function(e,t){"use strict";e.exports=function(e){var t=window.onerror;if(e){var r=e.cfgManager;if(r.get("autoCatch").js!==!1){window.onerror=function(){e.parseWindowError.apply(e,arguments),t&&t.apply(window,arguments)};var n=window.addEventListener||window.attachEvent;n("unhandledrejection",function(){e.parsePromiseUnhandled.apply(e,arguments)})}if(r.get("autoCatch").console===!0){if(!window.console||!window.console.error)return;var i=window.console.error;window.console.error=function(){e.parseConsoleError.apply(e,arguments),i&&i.apply(window,arguments)}}}}},function(e,t,r){"use strict";var n=r(21),i=r(30);e.exports=function(e){var t=e.cfgManager;t.get("autoCatch").ajax&&(i(),n.on("ajaxCall",function(){e.parseAjax.apply(e,arguments)}));var r=window.addEventListener||window.attachEvent;t.get("autoCatch").resource&&(document&&"complete"===document.readyState?e.handleResourceTiming.apply(e,arguments):r("load",function(){e.handleResourceTiming.apply(e,arguments)}),r("error",function(t){t&&e.handleResourceLoadError.apply(e,arguments)},!0))}},function(e,t,r){(function(t){"use strict";var n=t.XMLHttpRequest,i=r(21),o=r(3);e.exports=function(){if(n&&!("_owl"in n)){n._owl=!0;var e=t.location.protocol;if("file:"!==e){var r=n.prototype.open,a=n.prototype.send;n.prototype.open=function(e,t){return this.url=t,this._startTime=+new Date,r.apply(this,arguments)},n.prototype.send=function(){var e=this,t="addEventListener",r="onreadystatechange",n=function(t){if(t){var r=+new Date-e._startTime;if(t.duration=r,/catfront.(dianping|51ping).com/.test(e.url)){var n=void 0;try{e.getAllResponseHeaders("content-type").indexOf("application/json")!==-1&&(n=t.currentTarget.response,n=JSON.parse(n))}catch(e){o.ignore(e)}200===t.currentTarget.status?e.success&&e.success(n):e.fail&&e.fail(n)}else i.trigger("ajaxCall",t)}};if(t in this)this[t]("load",n),this[t]("error",n),this[t]("abort",n);else{var s=this[r];this[r]=function(e){4===this.readyState&&n(e),s&&s.apply(this,arguments)}}return a.apply(this,arguments)}}}}}).call(t,function(){return this}())},function(e,t){"use strict";e.exports=function(e){var t=e.cfgManager;if(t.get("page").sensoryIndex&&e.sensoryObserver(),t.get("autoCatch").page&&!e.getReady())if(document&&"complete"===document.readyState)e.parsePageTimeWithDefer();else{var r=window.addEventListener||window.attachEvent;r("load",function(){e.parsePageTimeWithDefer()})}}},function(e,t,r){"use strict";var n=r(33);e.exports={getExt:function(){var e=n("network");if(!e){var t=navigator.userAgent,r=/NetType\/([a-zA-Z0-9]+)/;t&&r.test(t)&&(e=t.match(r)[1])}var i=n("unionid")||n("dpid")||n("_lxsdk_cuid"),o={};return e&&(o.network=e),i&&(o.unionId=i),o}}},function(e,t){"use strict";e.exports=function(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null}},function(e,t){"use strict";var r=["Baiduspider","googlebot","360Spider","haosouspider","YoudaoBot","Sogou News Spider","Yisouspider","Googlebot"];e.exports=r},function(e,t,r){"use strict";var n=r(13),i=r(5),o=r(4).version,a=r(3),s=.01;e.exports=function(e,t){if(e&&t&&!(Math.random()>s)){var r=function(e,t){try{e=e.split(".").map(function(e){return parseInt(e)}),t=t.split(".").map(function(e){return parseInt(e)});var r=void 0;return r=e[0]!==t[0]?e[0]-t[0]:e[1]!==t[1]?e[1]-t[1]:e[2]-t[2],r>=0}catch(e){return a.ignore(e),!1}};if(!r(t.cfgManager.get("version"),o)){var c={v:1,rate:s,project:e,version:"v_"+o,pageurl:encodeURIComponent(window.location.href),count:1},u=t.cfgManager.url+"/api/version";u=i.stringify(u,c),setTimeout(function(){n({type:"GET",url:u})},1500)}}}}])});